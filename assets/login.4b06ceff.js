import{d as w,z as y,r as h,a3 as S,A as k,c3 as x,o as I,l as V,n as l,m as t,w as a,u as _,c4 as E,c0 as b,c5 as C,s as D,O as f,h as N,D as q,F as T,G as A,v as K,x as O,_ as U}from"./index.9c610a3c.js";/* empty css                     *//* empty css                 */import{r as $}from"./request.9476507e.js";const g=n=>(K("data-v-4e5f7523"),n=n(),O(),n),z={class:"login-wrap"},G={class:"ms-login"},J=g(()=>l("div",{class:"ms-title"},"\u540E\u53F0\u7BA1\u7406\u7CFB\u7EDF",-1)),L={class:"login-btn"},M=D("\u767B\u5F55"),P=g(()=>l("p",{class:"login-tips"},"By : xiutai",-1)),R=w({__name:"login",setup(n){const F=y(),s=h({username:"",password:""}),B={username:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",trigger:"blur"}],password:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801",trigger:"blur"}]},m=S(),d=k(),p=i=>{!i||i.validate(e=>{if(e)$({method:"post",url:"/admin/login",data:{username:s.username,password:s.password}}).then(o=>{if(o.status===200){f.success("\u767B\u5F55\u6210\u529F"),localStorage.setItem("dytoken","bearer "+o.data.access_token),localStorage.setItem("ms_username",s.username);const u=m.defaultList[s.username=="admin"?"admin":"user"];m.handleSet(u),localStorage.setItem("ms_keys",JSON.stringify(u)),F.push("/")}},o=>{alert("\u8D26\u53F7\u6216\u5BC6\u7801\u9519\u8BEF,\u8BF7\u91CD\u65B0\u767B\u9646")});else return f.error("\u767B\u5F55\u6210\u529F"),!1})};return x().clearTags(),(i,e)=>{const o=N,u=q,c=T,v=A;return I(),V("div",z,[l("div",G,[J,t(v,{model:s,rules:B,ref_key:"login",ref:d,"label-width":"0px",class:"ms-content"},{default:a(()=>[t(c,{prop:"username"},{default:a(()=>[t(u,{modelValue:s.username,"onUpdate:modelValue":e[0]||(e[0]=r=>s.username=r),placeholder:"username"},{prepend:a(()=>[t(o,{icon:_(E)},null,8,["icon"])]),_:1},8,["modelValue"])]),_:1}),t(c,{prop:"password"},{default:a(()=>[t(u,{type:"password",placeholder:"password",modelValue:s.password,"onUpdate:modelValue":e[1]||(e[1]=r=>s.password=r),onKeyup:e[2]||(e[2]=b(r=>p(d.value),["enter"]))},{prepend:a(()=>[t(o,{icon:_(C)},null,8,["icon"])]),_:1},8,["modelValue"])]),_:1}),l("div",L,[t(o,{type:"primary",onClick:e[3]||(e[3]=r=>p(d.value))},{default:a(()=>[M]),_:1})]),P]),_:1},8,["model"])])])}}});const Y=U(R,[["__scopeId","data-v-4e5f7523"]]);export{Y as default};

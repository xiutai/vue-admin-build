import{d as w,z as y,r as h,a6 as I,A as S,c6 as k,o as x,l as V,n as l,m as t,w as a,u as _,c7 as E,c3 as b,c8 as C,s as D,Q as f,h as N,H as q,I as T,J as A,v as J,x as K,_ as U}from"./index.a2657bdd.js";/* empty css                     *//* empty css                 */import{r as $}from"./request.df937969.js";const g=n=>(J("data-v-4e5f7523"),n=n(),K(),n),z={class:"login-wrap"},H={class:"ms-login"},L=g(()=>l("div",{class:"ms-title"},"\u540E\u53F0\u7BA1\u7406\u7CFB\u7EDF",-1)),M={class:"login-btn"},O=D("\u767B\u5F55"),P=g(()=>l("p",{class:"login-tips"},"By : xiutai",-1)),Q=w({__name:"login",setup(n){const B=y(),s=h({username:"",password:""}),F={username:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",trigger:"blur"}],password:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801",trigger:"blur"}]},m=I(),d=S(),p=i=>{!i||i.validate(e=>{if(e)$({method:"post",url:"/admin/login",data:{username:s.username,password:s.password}}).then(o=>{if(o.status===200){f.success("\u767B\u5F55\u6210\u529F"),localStorage.setItem("dytoken","bearer "+o.data.access_token),localStorage.setItem("ms_username",s.username);const u=m.defaultList[s.username=="admin"?"admin":"user"];m.handleSet(u),localStorage.setItem("ms_keys",JSON.stringify(u)),B.push("/")}},o=>{alert("\u8D26\u53F7\u6216\u5BC6\u7801\u9519\u8BEF,\u8BF7\u91CD\u65B0\u767B\u9646")});else return f.error("\u767B\u5F55\u6210\u529F"),!1})};return k().clearTags(),(i,e)=>{const o=N,u=q,c=T,v=A;return x(),V("div",z,[l("div",H,[L,t(v,{model:s,rules:F,ref_key:"login",ref:d,"label-width":"0px",class:"ms-content"},{default:a(()=>[t(c,{prop:"username"},{default:a(()=>[t(u,{modelValue:s.username,"onUpdate:modelValue":e[0]||(e[0]=r=>s.username=r),placeholder:"username"},{prepend:a(()=>[t(o,{icon:_(E)},null,8,["icon"])]),_:1},8,["modelValue"])]),_:1}),t(c,{prop:"password"},{default:a(()=>[t(u,{type:"password",placeholder:"password",modelValue:s.password,"onUpdate:modelValue":e[1]||(e[1]=r=>s.password=r),onKeyup:e[2]||(e[2]=b(r=>p(d.value),["enter"]))},{prepend:a(()=>[t(o,{icon:_(C)},null,8,["icon"])]),_:1},8,["modelValue"])]),_:1}),l("div",M,[t(o,{type:"primary",onClick:e[3]||(e[3]=r=>p(d.value))},{default:a(()=>[O]),_:1})]),P]),_:1},8,["model"])])])}}});const Y=U(Q,[["__scopeId","data-v-4e5f7523"]]);export{Y as default};
